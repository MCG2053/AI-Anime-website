# Anime Website 项目整理与优化规范

## Why
项目已完成前端核心功能开发（v1.0.6），需要整理项目结构、提交版本、清理冗余代码、优化性能，并为最终目标（完整的动漫播放网站，包括前后端）制定清晰的路线图。

## What Changes
- 提交当前版本到 Git（v1.0.6）
- 清理冗余文件和未使用的代码
- 优化项目结构和代码质量
- 统计项目进度并制定后续开发计划
- 规划后端开发和性能优化方案

## Impact
- 影响范围：整个项目
- 关键文件：所有源代码文件、配置文件、文档

---

## 当前项目状态分析

### 已完成功能（前端）

#### 1. 用户认证模块
- [x] 登录页面（邮箱+密码）
- [x] 注册页面（用户名+邮箱+密码+确认密码）
- [x] 忘记密码页面
- [x] 用户协议和隐私政策页面
- [x] JWT Token 存储与验证
- [x] 路由守卫

#### 2. 主题系统
- [x] 浅色/深色主题切换
- [x] CSS 变量系统
- [x] Naive UI 主题同步
- [x] 系统主题跟随

#### 3. 视频浏览模块
- [x] 首页分区导航（推荐、番剧、国创、剧场版、OVA）
- [x] 视频筛选（年份、类型、国家）
- [x] 视频卡片组件
- [x] 视频列表组件
- [x] 番剧详情页
- [x] 搜索页面

#### 4. 视频播放模块
- [x] xgplayer 视频播放器
- [x] 弹幕发送组件
- [x] 评论组件
- [x] 选集功能
- [x] 相关推荐

#### 5. 用户中心（预留）
- [x] 个人中心页面框架
- [ ] 观看历史
- [ ] 收藏夹
- [ ] 个人设置

#### 6. 响应式布局
- [x] 手机端适配
- [x] 平板端适配
- [x] 桌面端适配

### 待完成功能

#### 前端优化
- [ ] 路由懒加载优化
- [ ] 图片懒加载
- [ ] 虚拟列表（长列表优化）
- [ ] 骨架屏完善
- [ ] 错误边界处理
- [ ] PWA 支持

#### 后端开发
- [ ] 用户认证 API
- [ ] 视频管理 API
- [ ] 评论系统 API
- [ ] 弹幕系统 API
- [ ] 搜索服务
- [ ] 文件上传服务

#### 性能优化
- [ ] CDN 配置
- [ ] 图片压缩与 WebP
- [ ] Gzip/Brotli 压缩
- [ ] 缓存策略
- [ ] 代码分割优化

---

## 整理任务清单

### Phase 1: 版本提交与清理

#### 1.1 Git 版本管理
- 检查当前 Git 状态
- 提交所有未提交的更改
- 创建 v1.0.6 版本标签

#### 1.2 文件清理
- 检查并删除未使用的组件
- 清理未使用的样式
- 移除冗余的 Mock 数据
- 清理未使用的导入

#### 1.3 代码优化
- 统一代码风格
- 优化组件结构
- 提取公共逻辑

### Phase 2: 结构优化

#### 2.1 目录结构优化
- 检查目录结构合理性
- 整理组件分类
- 优化文件命名

#### 2.2 配置优化
- Vite 构建配置优化
- TypeScript 配置检查
- 环境变量整理

### Phase 3: 进度统计与规划

#### 3.1 进度统计
- 统计已完成功能
- 计算完成百分比
- 更新 Plan.md

#### 3.2 后续规划
- 制定后端开发计划
- 制定性能优化计划
- 制定部署方案

---

## 目标架构

### 最终目标：标准动漫播放网站

```
┌─────────────────────────────────────────────────────────────┐
│                        前端 (Vue 3)                          │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ 用户系统 │ │ 视频浏览 │ │ 视频播放 │ │ 个人中心 │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ 弹幕系统 │ │ 评论系统 │ │ 搜索系统 │ │ 收藏系统 │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        后端 API                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    RESTful API                       │   │
│  │  /api/auth  /api/videos  /api/comments  /api/users  │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        数据层                                │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ MySQL   │ │ Redis   │ │ OSS     │ │ CDN     │           │
│  │ 主数据库 │ │ 缓存    │ │ 文件存储 │ │ 静态资源 │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
└─────────────────────────────────────────────────────────────┘
```

### 技术栈规划

#### 前端（已完成）
- Vue 3 + TypeScript + Vite
- Pinia + Vue Router
- Naive UI + Tailwind CSS
- xgplayer + danmaku.js

#### 后端（待开发）
- Node.js + Express / Nest.js
- 或 Go + Gin
- 或 Python + FastAPI

#### 数据库
- MySQL / PostgreSQL（主数据库）
- Redis（缓存）
- MongoDB（日志/弹幕）

#### 基础设施
- Docker + Kubernetes
- Nginx（反向代理）
- OSS（对象存储）
- CDN（内容分发）

---

## 性能优化方案

### 前端优化
1. **代码分割**
   - 路由懒加载
   - 组件按需加载
   - 第三方库分离

2. **资源优化**
   - 图片懒加载
   - WebP 格式
   - 图片压缩

3. **渲染优化**
   - 虚拟列表
   - 防抖节流
   - CSS 硬件加速

4. **缓存策略**
   - Service Worker
   - HTTP 缓存
   - 本地存储

### 后端优化
1. **API 优化**
   - 响应压缩
   - 分页查询
   - 字段筛选

2. **数据库优化**
   - 索引优化
   - 查询优化
   - 读写分离

3. **缓存策略**
   - Redis 缓存
   - 热点数据预加载
   - 缓存穿透防护

### 访问优化
1. **CDN 加速**
   - 静态资源 CDN
   - 视频流 CDN
   - 全站加速

2. **负载均衡**
   - Nginx 负载均衡
   - 多节点部署
   - 自动扩缩容

---

## 版本规划

### v1.0.x - 前端优化阶段
- v1.0.7: 代码整理与清理
- v1.0.8: 性能优化
- v1.0.9: PWA 支持

### v1.1.x - 后端开发阶段
- v1.1.0: 后端框架搭建
- v1.1.1: 用户认证 API
- v1.1.2: 视频 API
- v1.1.3: 评论与弹幕 API

### v1.2.x - 集成测试阶段
- v1.2.0: 前后端联调
- v1.2.1: 功能测试
- v1.2.2: 性能测试

### v2.0.0 - 正式发布
- 完整功能
- 性能优化
- 生产部署
