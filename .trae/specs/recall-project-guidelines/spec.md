# Anime Website 项目重要注意事项规范

## Why
本项目是一个动漫视频播放前端网站，采用 Vue 3 技术栈。为了确保开发过程中的一致性和质量，需要明确记录项目的核心注意事项和开发规范。

## What Changes
- 整理项目核心开发规范
- 明确测试要求
- 规范文档与版本控制流程
- 总结技术栈和架构要点

## Impact
- 影响范围：所有后续开发工作
- 关键文件：Plan.md、package.json、variables.css

---

## 核心注意事项

### 1. 技术栈规范

#### 1.1 核心框架
- **Vue 3**：使用 Composition API (`<script setup>`)
- **构建工具**：Vite
- **路由管理**：Vue Router 4
- **状态管理**：Pinia
- **UI 组件库**：Naive UI（支持主题定制）
- **样式方案**：CSS 变量 + Tailwind CSS
- **HTTP 客户端**：Axios
- **视频播放器**：xgplayer（支持弹幕）
- **类型支持**：TypeScript

#### 1.2 代码风格
- **禁止添加注释**：除非用户明确要求
- 使用 CSS 变量进行主题控制
- 遵循现有组件的命名约定和结构模式

---

### 2. 测试要求（必须严格遵守）

#### 2.1 小更新测试
对于**小更新**（如界面颜色调整、文字修改、样式微调等）：
- ✅ 必须进行全面的功能测试，验证功能正确性
- ✅ 确保修改不影响其他功能的正常运行
- ✅ 在开发服务器上进行实时验证

#### 2.2 大更新测试
对于**大更新**（如新增功能、重大重构、架构调整等）：
- ✅ 必须进行性能测试、接口测试和功能测试
- ✅ 必须在测试文档中记录详细的测试步骤和测试结果
- ✅ 根据测试文档修复所有发现的 Bug
- ✅ 提交更新版本供个人审核批准后方可发布

---

### 3. 文档与版本控制

#### 3.1 小修改处理
对于**小修改**（如界面颜色变化、样式调整等）：
- 📝 在 Plan.md 开发流程文档相应部分记录变更内容
- 📝 说明修改原因和影响范围

#### 3.2 中等修改处理
对于**中等修改**（如功能修复、Bug 修复等）：
- 📦 必须提交到 Git 仓库
- 📄 附上更新的测试文档
- 📄 附上修订后的流程文档

#### 3.3 版本更新提交
对于**所有版本更新**：
- 📋 必须在 Git 提交时包含详细的更新内容描述
- 📋 描述应包括：修改的文件、修改的功能、修复的问题等
- 📋 使用规范的提交信息格式（feat/fix/docs/style/refactor等）

---

### 4. CSS 变量系统

#### 4.1 颜色变量
```css
/* 主色调 */
--color-primary: #3b82f6;
--color-primary-hover: #2563eb;

/* 功能色 */
--color-success: #10b981;
--color-warning: #f59e0b;
--color-error: #ef4444;

/* 背景色 */
--bg-color: #f5f3ed;        /* 浅色模式 */
--bg-card: #ffffff;

/* 文字色 */
--text-color: #1e293b;
--text-secondary: #64748b;
--text-muted: #94a3b8;
```

#### 4.2 暗色模式
- 通过 `.dark` 类切换
- 所有颜色变量在暗色模式下有对应值

---

### 5. 响应式断点

| 断点 | 宽度范围 | 设备类型 |
|------|---------|---------|
| 手机 | < 640px | 小屏手机 |
| 手机 | 640px - 768px | 大屏手机 |
| 平板 | 768px - 1024px | 平板设备 |
| 桌面 | 1024px - 1280px | 小屏桌面 |
| 桌面 | > 1280px | 大屏桌面 |

---

### 6. 项目目录结构

```
src/
├── components/
│   ├── common/         # 通用组件
│   ├── layout/         # 布局组件
│   ├── theme/          # 主题切换组件
│   └── video/          # 视频相关组件
├── views/              # 页面视图
├── router/             # 路由配置
├── stores/             # Pinia 状态模块
├── services/           # API 服务层
│   ├── api/            # 各模块接口定义
│   └── mock/           # Mock 数据
├── types/              # TypeScript 类型定义
├── utils/              # 工具函数
└── styles/             # 全局样式
```

---

### 7. 关键开发原则

#### 7.1 代码复用
- 优先编辑现有文件而非创建新文件
- 遵循现有组件的模式和约定
- 不创建不必要的文档文件

#### 7.2 安全最佳实践
- 不暴露或记录密钥和敏感信息
- 不将密钥提交到仓库

#### 7.3 依赖管理
- 添加新库前先检查项目是否已使用
- 检查 package.json 确认依赖可用性

---

### 8. 风险与注意事项

1. **弹幕模块性能**：大量弹幕同时渲染可能卡顿，考虑使用 Canvas 渲染或限制同时显示数量
2. **视频播放器兼容性**：HLS 格式需要额外处理（如使用 hls.js）
3. **主题切换同步**：确保 Naive UI 主题与自定义主题同步
4. **Token 过期处理**：自动跳转登录，支持静默刷新（如果后端支持）

---

### 9. 当前版本状态

- **当前版本**: v1.0.6
- **开发服务器**: http://localhost:3000/
- **最后更新**: 2026-02-16
