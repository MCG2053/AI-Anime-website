# Anime Website 开发计划

## 项目概述

动漫视频播放前端网站项目，采用 Vue 3 技术栈，实现用户登录、黑白主题切换、多视频分区、多维度筛选（时间、动漫类型、国家）、视频播放、评论与弹幕功能。项目采用现代扁平风格界面设计，并预留与后端 API 的接入接口，便于后续无缝对接后端服务进行公测。

---

## 技术栈

- **核心框架**：Vue 3 (Composition API)
- **构建工具**：Vite
- **路由管理**：Vue Router 4
- **状态管理**：Pinia
- **UI 组件库**：Naive UI（支持主题定制、扁平风格）
- **样式方案**：CSS 变量 + Tailwind CSS
- **HTTP 客户端**：Axios（拦截器、统一错误处理）
- **视频播放器**：xgplayer（支持弹幕）
- **弹幕引擎**：danmaku.js
- **类型支持**：TypeScript

---

## 功能模块

### 3.1 用户认证
- 登录页面（手机号/邮箱 + 密码）
- 登录状态持久化（JWT Token 存储于 localStorage 或 cookie）
- 退出登录
- （可选）注册/找回密码（预留接口）

### 3.2 主题切换
- 黑白主题切换按钮
- 通过 CSS 变量控制颜色模式（浅色/深色）
- 跟随系统主题（可选）

### 3.3 视频分区导航
- 顶部或侧边导航栏展示分区：推荐、番剧、国创、剧场版、OVA 等
- 点击分区切换视频列表

### 3.4 视频筛选
在分区内提供筛选栏：
- 时间筛选：全部、今年、去年、更早
- 动漫类型：热血、恋爱、搞笑、科幻等（动态从接口获取）
- 国家/地区：日本、中国、美国等
- 筛选条件组合后重新请求视频列表

### 3.5 视频列表展示
- 网格布局显示视频卡片（封面、标题、播放量、更新至等）
- 支持分页或无限滚动（预留）

### 3.6 视频播放页面
- 视频播放器（支持清晰度切换、全屏、倍速等）
- 视频信息区：标题、简介、发布时间、播放量、点赞/收藏等（预留）
- 评论区域：
  - 评论列表（头像、用户名、内容、时间、点赞、回复）
  - 发表评论（需登录）
- 弹幕功能：
  - 弹幕显示（滚动效果）
  - 发送弹幕（需登录）
  - 弹幕设置（开关、透明度、区域等）

### 3.7 其他预留功能
- 个人中心（修改资料、观看历史、收藏夹等）—— 仅预留路由和占位组件
- 搜索功能（按标题、标签）—— 预留接口

---

## 项目目录结构

```
src/
├── assets/                 # 静态资源（图片、字体等）
├── components/             # 公共组件
│   ├── common/             # 通用组件（Button, Input, Card等）
│   ├── layout/             # 布局组件（Header, Footer, Sidebar）
│   ├── video/              # 视频相关组件（Player, Danmaku, Comment）
│   └── theme/              # 主题切换组件
├── views/                  # 页面视图
│   ├── Home.vue            # 首页（分区导航+视频列表）
│   ├── Login.vue           # 登录页
│   ├── VideoDetail.vue     # 视频播放页
│   ├── Search.vue          # 搜索页（预留）
│   └── User/               # 个人中心相关页面（预留）
├── router/                 # 路由配置
│   └── index.ts
├── stores/                 # Pinia 状态模块
│   ├── user.ts             # 用户状态
│   ├── theme.ts            # 主题状态
│   └── video.ts            # 视频列表/播放状态（可选）
├── services/               # API 服务层
│   ├── request.ts          # Axios 实例与拦截器
│   ├── api/                # 各模块接口定义
│   │   ├── user.ts
│   │   ├── video.ts
│   │   ├── comment.ts
│   │   └── danmaku.ts
│   └── mock/               # Mock 数据（用于开发）
├── types/                  # TypeScript 类型定义
│   └── index.ts
├── utils/                  # 工具函数
│   ├── storage.ts          # 本地存储封装
│   └── theme.ts            # 主题切换辅助
├── styles/                 # 全局样式
│   ├── variables.css       # CSS 变量
│   └── global.css
├── App.vue
└── main.ts
```

---

## 开发流程

### 5.1 阶段一：需求确认与设计
- 确认功能细节，输出原型图或设计稿（扁平风格参考：大量留白、简洁线条、柔和阴影、无边框或细边框）
- 定义色彩系统（黑白主题色：浅色背景#FFFFFF，深色背景#121212，强调色可选用高饱和但克制）
- 设计路由结构（/、/login、/video/:id 等）
- 定义与后端的接口契约（API 文档），使用 Swagger/OpenAPI 或简单 Markdown 记录，以便后续替换 Mock

### 5.2 阶段二：项目初始化与基础搭建
- 使用 Vite 创建 Vue 3 + TypeScript 项目
- 安装并配置 Vue Router、Pinia
- 安装 UI 组件库（Naive UI 支持按需引入和主题定制）
- 安装 Tailwind CSS（可选）
- 配置 Axios 实例，添加请求/响应拦截器，统一处理 Token 和错误提示
- 配置环境变量（.env.development、.env.production），存储 API 基础地址

### 5.3 阶段三：核心功能开发

#### 5.3.1 主题切换模块
- 在 Pinia 中创建 theme store，存储当前主题模式（light/dark）
- 定义 CSS 变量（如 --bg-color、--text-color），在根元素上动态切换 class
- 创建 ThemeToggle 组件，点击切换主题并持久化到 localStorage

#### 5.3.2 用户认证模块
- 创建登录页面，使用表单验证
- 调用登录 API（先 Mock）获取 Token，存入 Pinia 和 localStorage
- 添加路由守卫，保护需要登录的页面（如个人中心、发表评论）
- 实现退出功能（清除 Token，跳转登录页）

#### 5.3.3 视频分区与筛选模块
- 定义分区数据结构（id、名称）
- 顶部导航栏展示分区，激活样式
- 筛选栏组件：时间选择下拉、类型多选/单选、国家选择
- 根据分区和筛选条件组合，调用视频列表 API（Mock）
- 视频列表卡片组件，点击卡片跳转视频详情页

#### 5.3.4 视频播放页面
- 使用西瓜播放器或 DPlayer 封装 VideoPlayer 组件
- 根据视频 ID 获取视频地址、清晰度列表
- 视频信息展示
- 弹幕模块：
  - 初始化弹幕引擎，绑定到播放器容器
  - 监听播放器时间更新，同步显示历史弹幕
  - 发送弹幕：调用发送 API，成功后实时添加到弹幕引擎
- 评论模块：
  - 评论列表组件（支持分页或无限加载）
  - 发表评论表单（登录后才显示）
  - 评论回复（预留）

#### 5.3.5 接口 Mock 方案
- 在 services/mock 中编写 Mock 数据
- 或使用 MSW 拦截请求返回 Mock 数据，更接近真实网络请求
- 确保 Mock 数据结构与最终 API 一致，方便后续替换 baseURL

### 5.4 阶段四：前后端联调与适配
- 后端 API 就绪后，修改环境变量 VITE_API_BASE_URL 为真实后端地址
- 根据实际接口响应调整前端数据适配层（如字段名映射）
- 处理跨域问题（开发环境配置 proxy，生产环境由后端配置 CORS）

### 5.5 阶段五：测试与优化
- 单元测试（可选）：对核心工具函数、store 进行测试
- 体验优化：加载状态、骨架屏、错误边界
- 性能优化：路由懒加载、组件异步加载、虚拟列表（评论）
- 兼容性测试：不同浏览器、移动端适配（可选）

### 5.6 阶段六：构建与部署
- 执行 npm run build 生成 dist 目录
- 部署到 Nginx、Vercel、Netlify 或云服务器
- 配置前端路由 history 模式（需服务器支持回退到 index.html）

---

## 预留后端 API 接入策略

1. **接口定义先行**：在开发初期即定义所有需要调用的接口（路径、方法、请求/响应格式），并形成文档。

2. **环境变量控制**：通过 VITE_API_BASE_URL 动态切换 API 地址，开发环境可指向 Mock 服务或本地后端。

3. **请求层封装**：所有 API 调用集中在 services/api 目录，每个模块导出函数。

4. **Mock 数据替换**：当后端接口完成时，只需修改 request.ts 中的 baseURL，Mock 服务可选择性关闭。

5. **类型保障**：使用 TypeScript 定义请求参数和响应数据类型，确保前后端数据契约一致。

---

## 风险与注意事项

1. **弹幕模块的性能**：大量弹幕同时渲染可能卡顿，可考虑使用 Canvas 渲染或限制同时显示的弹幕数量。

2. **视频播放器的兼容性**：HLS 格式需要额外处理（如使用 hls.js）。

3. **黑白主题切换时**，UI 组件库的主题同步（Naive UI 支持动态切换主题）。

4. **确保 Token 过期时自动跳转登录**，并尝试静默刷新（如果后端支持 refresh token）。

---

## ⚠️ 关键开发程序（必须严格遵守）

### 1. 测试要求

#### 1.1 小更新测试
对于**小更新**（如界面颜色调整、文字修改、样式微调等）：
- ✅ 必须进行全面的功能测试，验证功能正确性
- ✅ 确保修改不影响其他功能的正常运行
- ✅ 在开发服务器上进行实时验证

#### 1.2 大更新测试
对于**大更新**（如新增功能、重大重构、架构调整等）：
- ✅ 必须进行性能测试、接口测试和功能测试
- ✅ 必须在测试文档中记录详细的测试步骤和测试结果
- ✅ 根据测试文档修复所有发现的 Bug
- ✅ 提交更新版本供个人审核批准后方可发布

### 2. 文档与版本控制

#### 2.1 小修改处理
对于**小修改**（如界面颜色变化、样式调整等）：
- 📝 在开发流程文档相应部分记录变更内容
- 📝 说明修改原因和影响范围

#### 2.2 中等修改处理
对于**中等修改**（如功能修复、Bug 修复等）：
- 📦 必须提交到 Git 仓库
- 📄 附上更新的测试文档
- 📄 附上修订后的流程文档

#### 2.3 版本更新提交
对于**所有版本更新**：
- 📋 必须在 Git 提交时包含详细的更新内容描述
- 📋 描述应包括：修改的文件、修改的功能、修复的问题等
- 📋 使用规范的提交信息格式（feat/fix/docs/style/refactor等）

---

## 开发进度记录

### v1.0.0 - 初始版本 (2026-02-14)

#### 已完成阶段

**✅ 阶段一：需求确认与设计**
- 确认功能细节，采用现代扁平风格界面设计
- 定义色彩系统（浅色背景#FFFFFF，深色背景#121212，强调色#0ea5e9）
- 设计路由结构（/、/login、/video/:id、/search、/user）
- 定义与后端的接口契约（TypeScript类型定义）

**✅ 阶段二：项目初始化与基础搭建**
- 使用 Vite 创建 Vue 3 + TypeScript 项目
- 安装并配置 Vue Router 4、Pinia
- 安装 UI 组件库 Naive UI（支持按需引入和主题定制）
- 安装 Tailwind CSS v4 + @tailwindcss/postcss
- 配置 Axios 实例，添加请求/响应拦截器
- 配置环境变量（.env.development、.env.production）

**✅ 阶段三：核心功能开发**

*5.3.1 主题切换模块*
- [x] 在 Pinia 中创建 theme store（stores/theme.ts）
- [x] 定义 CSS 变量（styles/variables.css）
- [x] 创建 ThemeToggle 组件（components/theme/ThemeToggle.vue）
- [x] 支持系统主题跟随

*5.3.2 用户认证模块*
- [x] 创建登录页面（views/Login.vue）
- [x] 表单验证（邮箱+密码）
- [x] Mock 登录接口
- [x] JWT Token 存储于 localStorage
- [x] 路由守卫保护需要登录的页面
- [x] 退出登录功能

*5.3.3 视频分区与筛选模块*
- [x] 定义分区数据结构（推荐、番剧、国创、剧场版、OVA）
- [x] 顶部导航栏展示分区（components/layout/AppHeader.vue）
- [x] 筛选栏组件：年份、类型、国家选择
- [x] 视频列表卡片组件（components/video/VideoCard.vue）

*5.3.4 视频播放页面*
- [x] 使用 xgplayer 封装 VideoPlayer 组件
- [x] 视频信息展示（标题、简介、播放量、点赞、收藏）
- [x] 弹幕发送组件（components/video/DanmakuSender.vue）
- [x] 评论模块（components/video/CommentSection.vue）
- [x] 选集功能
- [x] 相关推荐

*5.3.5 接口 Mock 方案*
- [x] 在 services/mock 中编写 Mock 数据
- [x] Mock 数据结构与最终 API 一致

**✅ 阶段六：构建与部署准备**
- [x] Git 仓库初始化
- [x] 创建 v1.0.0 版本标签
- [x] 开发服务器运行正常（http://localhost:3000/）

---

### v1.0.1 - 界面优化更新 (2026-02-14)

#### 任务列表

**1. video-card-tags 文字颜色修复**
- **状态**: ✅ 已完成
- **需求**: video-card-tags 里的文字在鼠标未悬停时为白色
- **问题分析**: `global.css` 中的 `.tag-primary` 类使用了 `-webkit-text-fill-color: transparent` 实现渐变文字效果，该样式覆盖了 `VideoCard.vue` 中设置的 `color: white`
- **解决方案**: 在 `VideoCard.vue` 的 `.video-card__tags .tag` 样式中添加 `background: transparent` 和 `-webkit-text-fill-color: white`
- **修改文件**: `src/components/common/VideoCard.vue`

**2. 搜索页搜索框位置调整**
- **状态**: ✅ 已完成
- **需求**: 将搜索页的搜索框往下移，与页头保持一定距离
- **解决方案**: 在 `.search-page__header` 样式中添加 `padding-top: 80px`
- **修改文件**: `src/views/Search.vue`

**3. 搜索页移除 filter-panel**
- **状态**: ✅ 已完成
- **需求**: 在搜索界面中去除 filter-panel
- **解决方案**: 从模板中移除两个 filter-panel 区块，移除相关 JS 变量和 CSS
- **修改文件**: `src/views/Search.vue`

**4. 更新 video-card 基础样式**
- **状态**: ✅ 已完成
- **需求**: 应用新的 video-card 样式
- **解决方案**: 更新 `.video-card` 样式，同时保留倾斜效果相关属性
- **修改文件**: `src/components/common/VideoCard.vue`

**5. 更改 video-card 宽高比为 16:9**
- **状态**: ✅ 已完成
- **需求**: 将 video-card 根据 16:9 的比例更改大小
- **解决方案**: 将 `.video-card__cover` 的 `aspect-ratio: 3 / 4` 改为 `aspect-ratio: 16 / 9`
- **修改文件**: `src/components/common/VideoCard.vue`

#### 涉及文件汇总

| 文件路径 | 修改类型 |
|---------|---------|
| `src/components/common/VideoCard.vue` | 样式修改 |
| `src/views/Search.vue` | 模板/JS/CSS 删除与修改 |
| `src/styles/global.css` | 仅读取，未修改 |

#### 技术要点

1. **CSS 优先级**: 使用 `-webkit-text-fill-color` 覆盖全局渐变文字样式
2. **Vue SFC**: Scoped CSS 与全局 CSS 的优先级处理
3. **CSS aspect-ratio**: 响应式宽高比设置
4. **代码清理**: 移除未使用的变量、函数和样式

---

### 待完成阶段

**⏳ 阶段四：前后端联调与适配**
- [ ] 后端 API 就绪后，修改环境变量
- [ ] 根据实际接口响应调整前端数据适配层
- [ ] 处理跨域问题

**⏳ 阶段五：测试与优化**
- [ ] 单元测试
- [ ] 加载状态、骨架屏优化
- [ ] 路由懒加载、组件异步加载
- [ ] 兼容性测试

---

## Git 提交记录

| 提交ID | 日期 | 说明 |
|--------|------|------|
| 78ad2fb | 2026-02-14 | feat: 初始化项目 - 动漫视频播放前端网站 |
| 5cb0592 | 2026-02-14 | fix: 修复Tailwind CSS v4 PostCSS配置 |
| f12c944 | 2026-02-15 | feat: UI优化更新 |

---

## 版本标签

- **v1.0.0** - 初始版本，完成核心功能开发
- **v1.0.1** - 界面优化更新，修复 video-card 和搜索页样式问题
- **v1.0.2** - UI优化更新，边框样式统一、页头页脚调整
- **v1.0.3** - 响应式布局适配，支持手机端和平板端
- **v1.0.4** - 视频播放页面布局修复
- **v1.0.5** - UI细节优化与动画效果，列表切换过渡动画统一
- **v1.0.6** - 用户认证页面扩展，新增忘记密码和注册页面

---

### v1.0.3 - 响应式布局适配 (2026-02-15)

#### 任务列表

**1. 响应式断点变量定义**
- **状态**: ✅ 已完成
- **修改文件**: `src/styles/variables.css`
- **新增变量**: `--breakpoint-sm: 640px`, `--breakpoint-md: 768px`, `--breakpoint-lg: 1024px`, `--breakpoint-xl: 1280px`, `--breakpoint-2xl: 1536px`

**2. AppHeader 移动端汉堡菜单**
- **状态**: ✅ 已完成
- **修改文件**: `src/components/layout/AppHeader.vue`
- **新增功能**: 
  - 汉堡菜单按钮（1024px以下显示）
  - 移动端下拉导航菜单
  - 菜单展开/收起动画
  - 路由切换自动关闭菜单

**3. Home 页面响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Home.vue`
- **适配内容**:
  - 容器内边距响应式调整
  - 筛选面板布局调整（移动端垂直排列）
  - 视频网格间距调整

**4. BangumiDetail 页面响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/BangumiDetail.vue`
- **适配内容**:
  - 容器内边距响应式调整
  - 头部布局垂直排列（移动端）
  - 封面尺寸响应式调整
  - 标题字号响应式调整
  - 操作按钮布局调整

**5. Search 页面响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Search.vue`
- **适配内容**:
  - 搜索区域间距调整
  - 内容区域间距调整

**6. Login 页面响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Login.vue`
- **适配内容**:
  - 登录卡片宽度自适应
  - 内边距响应式调整

**7. User 页面响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/User/index.vue`
- **适配内容**:
  - 容器内边距响应式调整
  - 头部布局垂直排列（移动端）

**8. AppFooter 响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/components/layout/AppFooter.vue`
- **适配内容**: 内边距响应式调整

**9. VideoCard 响应式适配**
- **状态**: ✅ 已完成
- **修改文件**: `src/components/common/VideoCard.vue`
- **适配内容**:
  - 内容区域间距调整
  - 标题字号响应式调整
  - 播放按钮尺寸调整

#### 响应式断点说明

| 断点 | 宽度范围 | 设备类型 |
|------|---------|---------|
| 手机 | < 640px | 小屏手机 |
| 手机 | 640px - 768px | 大屏手机 |
| 平板 | 768px - 1024px | 平板设备 |
| 桌面 | 1024px - 1280px | 小屏桌面 |
| 桌面 | > 1280px | 大屏桌面 |

#### 测试验证

- ✅ 开发服务器运行正常（http://localhost:3000/）
- ✅ HMR热更新正常
- ✅ 无编译错误
- ✅ CSS兼容性警告已确认（不影响功能）

---

### v1.0.4 - 视频播放页面布局修复 (2026-02-15)

#### 修复内容

**Watch.vue 响应式布局修复**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Watch.vue`
- **问题描述**: 1024px以下屏幕宽度时，相关推荐区域使用 `order: -1` 导致跑到视频上方
- **解决方案**:
  - 移除 `order: -1`
  - 1024px以下：sidebar 使用双列网格布局
  - 768px以下：sidebar 恢复单列布局
  - 保持相关推荐在视频下方显示

#### 测试验证

- ✅ 开发服务器运行正常
- ✅ HMR热更新正常

---

### v1.0.5 - UI细节优化与动画效果 (2026-02-16)

#### 任务列表

**1. filter-row-label 手机端对齐调整**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Home.vue`
- **需求**: 将 filter-row-label 在手机端布局模式下的位置向右移动，使其与 filter-tag 保持垂直对齐
- **解决方案**: 在 768px 断点下添加 `padding-left: 12px`，与 filter-tag 的左边距保持一致

**2. mobile-menu-content 组件排列调整**
- **状态**: ✅ 已完成
- **修改文件**: `src/components/layout/AppHeader.vue`
- **需求**: 调整 mobile-menu-content 中的组件排列方式，三个一排共两排
- **解决方案**: 移除 768px 和 480px 断点的 grid-template-columns 覆盖，保持默认的 `repeat(3, 1fr)` 三列布局

**3. user-space-nav-item 手机端布局调整**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/User/index.vue`
- **需求**: 调整手机端页面下 user-space-nav-item 三个按键的排列方式为同行一字排开
- **解决方案**: 
  - 设置 `flex-wrap: nowrap` 禁止换行
  - 设置 `flex: 1` 使每个按钮等宽
  - 设置 `justify-content: center` 居中内容

**4. video-card-tags 样式统一**
- **状态**: ✅ 已完成
- **修改文件**: `src/components/common/VideoCard.vue`
- **需求**: 让 video-card-tags 的文字背景与 video-list-item-tags 保持一致
- **解决方案**: 更新 `.video-card__tags .tag` 样式，使用与 VideoListItem 一致的渐变背景和文字颜色

**5. 列表切换过渡动画**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Home.vue`, `src/views/Search.vue`, `src/views/BangumiDetail.vue`, `src/views/User/index.vue`
- **需求**: 切换卡片/列表模式时一致的过渡动画应用到所有页面
- **解决方案**: 
  - 使用 Vue TransitionGroup 组件包裹列表
  - 添加 `list-enter-active`, `list-leave-active`, `list-move` 过渡类
  - 添加 `fadeInUp` 关键帧动画实现入场效果
  - 通过 `animationDelay` 实现错落动画

**6. video-card-tags 文字颜色修复**
- **状态**: ✅ 已完成
- **修改文件**: `src/components/common/VideoCard.vue`
- **问题**: video-card-tags 中的文字颜色根本看不到
- **原因分析**: 模板中使用了 `class="tag tag-primary"`，而 `tag-primary` 类在 global.css 中使用了 `-webkit-text-fill-color: transparent` 导致文字透明
- **解决方案**: 移除模板中的 `tag-primary` 类，只保留 `class="tag"`

#### 涉及文件汇总

| 文件路径 | 修改类型 |
|---------|---------|
| `src/views/Home.vue` | 样式修改、模板修改 |
| `src/views/Search.vue` | 模板修改、样式新增 |
| `src/views/BangumiDetail.vue` | 模板修改、样式新增 |
| `src/views/User/index.vue` | 样式修改、模板修改 |
| `src/components/layout/AppHeader.vue` | 样式删除 |
| `src/components/common/VideoCard.vue` | 模板修改、样式修改 |

#### 技术要点

1. **Vue TransitionGroup**: 实现列表项的进入/离开/移动过渡动画
2. **CSS Keyframes**: 使用 `@keyframes fadeInUp` 创建自定义入场动画
3. **animationDelay**: 通过动态设置延迟时间实现错落效果
4. **CSS 类优先级**: `-webkit-text-fill-color: transparent` 会覆盖 color 属性

#### 测试验证

- ✅ 开发服务器运行正常（http://localhost:3000/）
- ✅ HMR热更新正常
- ✅ 无编译错误
- ✅ 手机端布局验证通过

---

### v1.0.6 - 用户认证页面扩展 (2026-02-16)

#### 任务列表

**1. 创建忘记密码页面**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/ForgotPassword.vue` (新建)
- **功能特性**:
  - 与登录页面布局一致的卡片式设计
  - 邮箱输入验证
  - 发送重置链接功能（Mock）
  - 发送成功后显示成功提示界面
  - 返回登录链接

**2. 创建注册页面**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Register.vue` (新建)
- **功能特性**:
  - 与登录页面布局一致的卡片式设计
  - 用户名、邮箱、密码、确认密码四个输入字段
  - 完整的表单验证（用户名长度、邮箱格式、密码长度、密码一致性）
  - 用户协议复选框
  - 密码显示/隐藏切换
  - 注册成功后自动登录并跳转首页

**3. 更新路由配置**
- **状态**: ✅ 已完成
- **修改文件**: `src/router/index.ts`
- **新增路由**:
  - `/register` - 注册页面
  - `/forgot-password` - 忘记密码页面
  - 两个路由都设置了 `guest: true` 元数据，已登录用户访问会重定向到首页

**4. 更新登录页面链接**
- **状态**: ✅ 已完成
- **修改文件**: `src/views/Login.vue`
- **修改内容**:
  - "忘记密码?" 链接跳转到 `/forgot-password`
  - "注册账户" 链接跳转到 `/register`

#### 涉及文件汇总

| 文件路径 | 修改类型 |
|---------|---------|
| `src/views/ForgotPassword.vue` | 新建 |
| `src/views/Register.vue` | 新建 |
| `src/router/index.ts` | 新增路由 |
| `src/views/Login.vue` | 功能修改 |

#### 技术要点

1. **布局一致性**: 新页面完全复用登录页面的样式结构，保持视觉统一
2. **表单验证**: 实时验证与提交验证相结合，提供友好的错误提示
3. **Vue Transition**: 使用 `<Transition>` 组件实现错误消息的平滑过渡
4. **响应式设计**: 继承登录页面的移动端适配样式

#### 测试验证

- ✅ 开发服务器运行正常（http://localhost:3000/）
- ✅ HMR热更新正常
- ✅ 无编译错误
- ✅ 路由跳转正常
- ✅ 表单验证功能正常

---

*最后更新: 2026-02-16*

---

### v1.0.7 - 项目整理与优化 (2026-02-16)

#### 任务列表

**1. Git 版本管理**
- **状态**: ✅ 已完成
- 提交 v1.0.6 版本所有更改
- 创建 v1.0.6 版本标签

**2. 冗余文件清理**
- **状态**: ✅ 已完成
- 删除未使用的 `src/components/video/VideoCard.vue`
- 删除未使用的 `src/views/VideoDetail.vue`

**3. 代码质量检查**
- **状态**: ✅ 已完成
- TypeScript 类型检查通过
- 目录结构检查通过

**4. 项目进度统计**
- **状态**: ✅ 已完成

#### 项目统计

**代码统计**
- 源代码文件数：46 个（.vue, .ts, .css）
- 源代码总大小：约 240KB

**组件统计**
| 目录 | 组件数 | 说明 |
|------|--------|------|
| components/common | 8 | 通用组件 |
| components/layout | 3 | 布局组件 |
| components/theme | 1 | 主题组件 |
| components/video | 3 | 视频相关组件 |
| views | 11 | 页面视图 |
| stores | 4 | Pinia 状态模块 |
| services/api | 4 | API 接口定义 |

**功能完成度**

| 模块 | 完成度 | 说明 |
|------|--------|------|
| 用户认证 | 100% | 登录、注册、忘记密码、协议页面 |
| 主题系统 | 100% | 浅色/深色主题、系统跟随 |
| 视频浏览 | 100% | 分区导航、筛选、卡片展示 |
| 视频播放 | 100% | xgplayer、弹幕、评论、选集 |
| 响应式布局 | 100% | 手机、平板、桌面适配 |
| 用户中心 | 30% | 页面框架（历史、收藏待开发） |
| 后端 API | 0% | 待开发 |

**整体前端完成度：约 85%**

#### 后续开发计划

**v1.0.x - 前端优化阶段**
- [ ] 路由懒加载优化
- [ ] 图片懒加载
- [ ] 虚拟列表（长列表优化）
- [ ] PWA 支持
- [ ] 错误边界处理

**v1.1.x - 后端开发阶段**
- [ ] 后端框架搭建（Node.js/Go/Python）
- [ ] 用户认证 API
- [ ] 视频管理 API
- [ ] 评论与弹幕 API
- [ ] 搜索服务

**v1.2.x - 集成测试阶段**
- [ ] 前后端联调
- [ ] 功能测试
- [ ] 性能测试

**v2.0.0 - 正式发布**
- 完整功能
- 性能优化
- 生产部署

---

## 项目架构

### 当前架构（前端）

```
┌─────────────────────────────────────────────────────────────┐
│                        前端 (Vue 3)                          │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ 用户系统 │ │ 视频浏览 │ │ 视频播放 │ │ 个人中心 │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ 弹幕系统 │ │ 评论系统 │ │ 搜索系统 │ │ 主题系统 │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                     Mock 数据服务                            │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              services/mock/index.ts                  │   │
│  │  用户数据  视频数据  评论数据  弹幕数据  番剧时间表      │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 目标架构（完整系统）

```
┌─────────────────────────────────────────────────────────────┐
│                        前端 (Vue 3)                          │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        后端 API                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    RESTful API                       │   │
│  │  /api/auth  /api/videos  /api/comments  /api/users  │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        数据层                                │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ MySQL   │ │ Redis   │ │ OSS     │ │ CDN     │           │
│  │ 主数据库 │ │ 缓存    │ │ 文件存储 │ │ 静态资源 │           │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘           │
└─────────────────────────────────────────────────────────────┘
```

---

*最后更新: 2026-02-16*
